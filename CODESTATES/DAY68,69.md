### Cloud Computing & Deployment

Cloud와 Deployment의 의미를 각각 알고, 내 코드를 남에게 배포할 수 있다.

- 클라우드 컴퓨팅이 무엇인지 설명할 수 있다.
- Deployment의 의미를 이해할 수 있다.
- 개발한 서비스를 다른 사용자가 이용 가능하도록 배포할 수 있다.

사용하는 서비스들의 특징과 사용해야하는 이유를 이해할 수 있다.

- RDS와 EC2에 설치된 데이터베이스의 차이를 이해할 수 있다.
- S3의 높은 가용성과 안정성을 이해할 수 있다.
- CloudFront의 컨텐츠 로딩시간 단축 효과들을 이해할 수 있다.
- Route53을 이용해 요청을 쉽고 안전하게 원하는곳으로 보낼 수 있음을 이해할 수 있다.

커스텀 도메인을 이용해 요청을 원하는곳으로 라우팅할 수 있다.

- DNS가 무엇인지 이해할 수 있다.
- 커스텀 도메인을 이용해 인증서를 발급받고 SSL을 적용할 수 있다.

### 기존 방식

주기적인 유지관리가 필요함

데이터 센터가 등장하여 유휴자원 대여.

### 클라우드 컴퓨팅의 장점

신속한 인프라 구축

유연한 인프라 관리

예상치 못한 트래픽 폭주 대응

손쉬운 글로벌 서비스

강력한 보안과 장애없는 서비스

합리적인 요금제

### 클라우드의 서비스 형태

SaaS laaS, PaaS

### SaaS(Software as a Service)

클라우드 제공자가 당장 사용가능한 소프트웨어를 제공하는 경우 대부분 SaaS에 해당한다.

### PaaS(Platform as a Service)

클라우드 제공자가 데이터베이스, 개발자 플랫폼까지 제공하는 경우 대부분 PaaS에 해당한다.

### laaS(Infrastructure as a Service)

클라우드 제공자가 네트워크와 하드웨어까지 제공하는 경우 laaS에 해당한다.

AWS는 laaS에 가깝다.

### Deploy

기본적으로 4단계를 거쳐서 개발한 서비스를 배포한다.

Development → Integration → Staging → Production

1. Development

각자의 컴퓨터에서 코드를 작성하고 테스트하는 과정

개발 단계이기 때문에 실제 데이터를 이용하지 않고 더미 데이터를 이용해서 테스트한다.

1. Integration

각자의 컴퓨터에서 작성한 코드를 합치는 과정이다.

내가 작성한 코드가 다른 코드를 침범해서 오류를 일으키지 않는지, 코드간에 conflict가 있지는 않은지 확인하는 과정을 거친다.

1. Staging

실제 출시 단계인 Production 단계와 가장 유사한 환경에서 테스트를 진행한다.

실제 데이터를 복사해서 문제가 있지 않은지 등 다양한 환경에서 테스트를 진행한다.

또한 서비스와 관련된 부서 혹은 인원의 확인과정을 거친다.

1. Production

사용자가 접속할 수 있는 Production 환경에서 코드를 구동하고 서비스를 제공한다.

실제 데이터를 가지고 서비스가 운영되기 때문에 문제가 생기면 안되는 단계이다.

작성한 코드가 다른 환경에서 정상작동하기 위해 절대경로대신 상대경로를 사용한다.

환경에 따라 포트를 분기할 수 있도록 환경변수를 설정한다.

Docker와 같은 개발환경자체를 통일시키는 솔루션을 사용한다.

### Amazon EC2(Elastic Compute Cloud)

AWS에서 원격으로 제어할 수 있는 가상의 컴퓨터를 한대 빌리는것

- EC2의 장점
- 구성하는데 필요한 시간이 짧다.
- AMI를 통해서 필요한 용도에 따라 다양한 운영체제에 대한 선택이 가능하다.
- 운영체제뿐만 아니라 CPU와 RAM 용량까지도 손쉽게 구성할 수 있다.

인스턴스는 1대의 컴퓨터를 의미하는 단위이고 AWS에서 컴퓨터를 빌리는것을 인스턴스를 생성한다고한다.

아마존 EC2를 통해서 할 수 있는 가장 기본적인 일은 웹서버를 설치하고 웹 서버를 통해서 사용자가 웹브라우저를 통해 요청하는 서비스를 제공하는것이다.

### AMI(Amazon Machine Image)

소프트웨어 구성이 기재된 템플릿이다.

윈도우,우분투만 깔려있는 템플릿 또는 런타임 (우분투 + Node.js, 윈도우 + JVM)도 제공될 수 있다.

AWS EC2 인스턴스를 생성한다는것은 AMI를 토대로 운영체제, CPU, RAM 혹은 런타임 등이 구성된 컴퓨터를 빌리는것이다.

### Amazon RDS(Relational Database Service)

AWS에서 제공하는 관계형 데이터 베이스 서비스

Q1. 그냥 EC2 인스턴스에 Database를 설치해서 운영하면 안되나?

A. EC2에 Database를 설치하는것은 개인 소유이다.

EC2 인스턴스를 사용하면 데이터베이스 관련해서 자동으로 담당하는 부분이 매우 적기 때문에, 사용자가 일일이 시간을 투자하여 데이터베이스 엔진의 설치와 버전 관리, 데이터 백업을 해야한다.

게다가 가용성과 내구성이 확보되지 않기 때문에 데이터베이스에 저장된 데이터가 유실되거나 정상적으로 사용하지 못할 확률이 커지며, 후에 필요에 따라 데이터베이스의 규모를 확장하기 어렵습니다.

RDS를 이용하면 데이터베이스 유지보수와 관련된 일들을 RDS에서 전적으로 자동 관리한다.

사용자가 해야 할 일은 초기 설정을 제외하고 데이터베이스에 저장된 데이터를 관리하는 일 밖에 없기 때문에 큰 편의성을 느낄 수 있다.

### Amazon S3(Simple Storage Service)

인터넷 공간에 데이터를 저장하는 저장소

S3 사용시 얻을 수 있는 이점으로 높은 확장성이 있다.

S3는 스토리지의 용량을 무한히 확장할 수 있고 사용한 만큼만 비용을 지불하면 되기 때문에 비용적은 측면에서 매우 효율적이다.

내구성이 매우 높다. 즉, 저장된 파일을 유실할 가능성이 적어진다.

다양한 스토리지 클래스를 제공한다.

### Standard 클래스와 Glacier클래스

Stardard는 범용적인 목적으로 사용하기 좋다. 데이터에 빠른 속도로 접근할 수 있고, 데이터 액세스 요청에 대한 처리 속도가 빠르다. 대신 데이터를 오래 보관하는 목적으로는 효율적인 선택지는 아니다. 보관 비용이 높기 때문이다.

장기 보관이 목적이라면 Glacier를 사용하는것이 효율적이다.

비록 저장된 데이터에 엑세스하는 속도는 느리지만, 데이터를 보관하는 비용이 매우 저렴하다는 장점이 있다.

이외에도 Standard-IA, One Zone-IA, S3 Glacier Deep Archive 등등 여러가지 스토리지 클래스가 존재한다.

### S3를 사용시 얻는 이점

정적 웹 사이트 호스팅이 가능하다.

### 버킷(Bucket)

S3에 저장되는 파일들이 담기는 바구니 (파일을 저장하는 최상위 디렉터리)

S3에서 저장되는 모든 파일은 버킷안에 저장되어야하고 , 버킷에는 무한한 양의 파일이 저장될 수 있다. 각각의 버킷은 이름을 가지고 있는데, 버킷의 이름은 버킷이 속해있는 리전(버킷이 생성된 지역)에서 유일해야한다.

또한 버킷 정책을 생성하여 해당 버킷에 대한 다른 유저의 접근 권한을 수정할 수 있다.

### 객체(Object)

S3에 저장되는 객체는 파일과 메타 데이터로 구성된다.

파일은 키:값 페어 형식으로 데이터가 저장된다.

S3객체 값으로써 저장될 수 있는 데이터의 최대 크기는 5TB이다.

파일의 키는 가각의 객체를 고유하게 만들어주는 식별자 역할을 한다.

파일의 키를 이용하여 원하는 객체를 검색할 수 있다.

메타 데이터는 객체의 생성일, 크기, 유형과 같은 객체에 대한 정보가 담긴데이터이다. 객체를 설명하는 데이터라고 이해하면 쉽다.

모든 객체는 고유한 URL주소를 가지고 있다.

URL주소는 아래와 같은 형태이고, URL 주소를 통해서 원하는 데이터에 접근할 수 있다.

http://[버킷의 이름].S3.amazonaws.com/[객체의 키]

### Client 배포

Q1. Amazon EC2 인스턴스를 사용해야하지 않을까?

A. 아니다. 클라이언트 앱을 정적 파일로 빌드하여 제공한다.

따라서 S3를 이용해서 클라이언트를 배포한다.

이때 필요한것이 빌드이다.

불필요한데이터를 없애고, 여러 갈래로 퍼져있는 데이터들을 통합/ 압축하여 배포하기에 최적화된 상태를 만드는것이다.

빌드 과정을 진행하기 전과 비교했을때 데이터의 용량이 줄어들고, 웹사이트의 로딩 속도가 빨라진다는 장점이 생긴다.

S3로 사용자들에게 Client Application을 제공하고 있는데, 사용자가 지구 반대편에 있다면 어떻게 빠르게 서비스를 제공할 수 있을까?

AWS에서 제공하는 CDN 서비스인 CloudFront를 통해서 각지의 데이터센터에 데이터를 분산시켜서 저장해 뒀다가 가까운 지역에서 데이터를 주는 방식으로 더 빠르게 서비스를 제공할 수 있다.

사용자들이 제공받은 Client Applictaion을 토오해서 요청을 전달할 Server Application은 어떻게 배포해야할까?

이때 AWS EC2 서비스를 통해 서버를 구성하고 서비스를 제공한다.

### Amazon Route53

직관적인 도메인 주소를 통해서 서비스에 접근할 수 있도록 한다.

### Security Group

보안그룹은  AWS에 임대한 인스턴스의 가상 방화벽이다.

인바운드(Inbound)와 아웃바운드(Outbound)에 대한 규칙을 설정할 수 있다.

ex)

SSH프로토콜 22포트가 허용되어있는데 다른 포트인

SMB프로토콜 445포트로 접근한다면 접근이 막힘.

인스턴스로 들어가는 트래픽은 인바운드

인스턴스에서 나가는 트래픽은 아웃바운드

EC2 인스턴스를 생성하면 기본적으로 SSH접속을 위한 SSH규칙만 생성되어있다.

EC2 인스턴스를 생성하면 기본적으로 나가는 모든 트래픽을 허용한다.
