# 모든 개발자를 위한 HTTP 웹 기본지식

### 인터넷 통신

인터넷 통신은 Client와 Server간의 통신이다.

하지만, 중간에 인터넷이 끼워진다면, Client부터 Server까지 도달하는데 어려움을 겪게된다.

이때, 우리들은 규칙을 정하게 되었다.

그 규칙을 이해하기 위해 우선 IP라는것부터 시작해보자.

### IP(Internet Protocol)

첫번째, Client와 Server가 각자 IP주소를 부여받아야한다.

### IP프로토콜의 역할

Packet이라는 통신 단위로 데이터를 전달한다.

지정한 IP Address에 데이터를 전달하는 역할을 한다.

### IP 패킷의 정보

출발지 IP, 목적지 IP, 전송데이터 , 기타..

### 클라이언트 패킷전달

전송데이터가 든 IP패킷을 인터넷망에 던져준다.

그러면 IP프로토콜에 의해서 인터넷망에서 알아서 잘 찾아 서버로 전달된다.

### 서버 패킷전달

전송 받았다 데이터가 든 IP패킷을 인터넷망에 던져주면 알아서 찾아간다.

`클라이언트가 던진 패킷의 이동경로와, 클라이언트가 받은 전달경로는 다를 수 있다.`

하지만 여기서 IP프로토콜의 한계가 발견된다.

### 비연결성

패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송한다.

### 비신뢰성

1. 중간에 패킷이 사라지면 어떻게 할것인가?

ex)중간에 전송되던 서버가 패킷을 받았는데 갑자기 꺼지는경우.

1. 패킷이 순서대로 오지 않으면 어떻게 할것인가?

패킷의 용량이약 1500바이트가 되면 “Hello”, “World”이렇게 2개의 패킷으로 나누어서 전달할 수 있다.

이때 각 패킷들은 노드를 거쳐가면서 서로 다른 각자의 노드를 타게되는데, “Hello”
패킷이 먼저 도착할지, “World”패킷이 먼저 도착할 지 알 수가 없다.

즉, “World”, “Hello”라고 도착하면 틀린 답이 오게되는것이다.

`그렇다면 이 문제를 어떻게 해결할 것인가?`

이러한 문제들을 해결하기 위해서 TCP/ UDP가 도입된다.

### 인터넷 프로토콜 스택의 4계층

| 애플리케이션 계층 - HTTP, FTP |
| --- |
| 전송 계층 - TCP, UDP |
| 인터넷 계층 - IP |
| 네트워크 인터페이스 계층 - LAN |

![Untitled](https://user-images.githubusercontent.com/70310271/172053218-47b8a8f3-ed85-4d1e-9766-dc853c219dd2.png)

Ethernet Frame은 mac주소등 여러 물리정보를 포함한다는것만 알고 넘어가자.

### TCP/IP(Transmission Control Protocol / Internet Protocol) 패킷 정보

출발지 PORT, 목적지 PORT, 전송제어 , 순서, 검증정보

이러한 정보들을 담고있기때문에, IP의 한계점을 비신뢰성의 문제를 해결 할 수 있게 되었다.

이제 TCP를 조금 더 구체적으로 알아보자.

### TCP의 특징

1. 연결지향 - TCP 3 way handshake (가상연결)
    1. Client가 Server로 SYN를 보낸다.
    2. Server는 확인 받았으므로 ACK와 자신도 연결해달라는 SYN를 함께 보낸다.
    3. 그러면 Client쪽에서도 확인했다는 신호인 ACK를 보낸다.
    4. 전송을 시작한다.

우선에 연결이 되었는지를 확인한 후에 보내기 시작한다.

서버도 클라이언트를 신뢰할수 있게되고, 클라이언트도 서버를 신뢰할 수 있게 되는 구조이다.

요즘은 최적화되어 3번 ACK를 보낼때 데이터를 같이 전송한다고 한다.

중요한것 3way handshake는 연결되었다고는 하지만, 실제로 연결된것은아니다.

나를 위한 전용랜선이 보장된것은 아니고, 논리적으로만 연결된것이다.

1. 데이터 전달 보증
    1. 데이터 전송
    2. 데이터 잘받았음.
    
    도중에 패킷이 손실 되었을때, 못 받아왔다는것을 알 수 있음.
    

1. 순서를 보장함.
    1. 패킷1,패킷2,패킷3 순서로 전송, → 패킷2, 패킷1,패킷3 순서로 도착.
    2. 패킷2부터 다시 보내라!
    
    패킷 2번부터 다시 보내기 시작한다.
    

즉, “World”,“Hello”가 들어와도 “Hello”,“World” 패킷의 순서를 보장한다.

1. 기타등등 많지만, 이 정도만 알고가도 문제는 없다.

### UDP(User Datagram Protocol)의 특징

TCP랑 다르게 기능이 거의없다.

연결 지향을 사용하지도 않으며

데이터 전달 보증도 없고, 순서도 보장하지 않는다.

하지만, 단순해서 빠르다는 장점이 있다.

정리하자면, IP와 거의 기능이 같고, PORT정보와 CheckSum정도만 추가된다.

### PORT의 역할은 무엇일까?

내가 인터넷으로 게임도하고있고, 노래도 듣고있다. 이럴때, 아이피는 하나인데, 게임에 전송하는 패킷인지, 노래를 전송하는 어떤 패킷인지 구분할 방법이 없게되는데, 이때 Port가, 어떤 어플리케이션에 들어갈 패킷인지를 구분해주게된다.

TCP는 이미 인터넷이라는곳에 구축이 되어있고 너무 크게 활성화 되어있다.

하지만 UDP는 기능이 없으므로 Application에서 추가적인 작업들이 필요하면 내가 처음부터 만들어 올릴 수 있다는 장점이 존재한다.

최근(2022-06-05에 듣는기준으로) 3way handshake를 최적화하여 없애는 방식으로 만들어 UDP가 조금 더 각광 받고있는 추세이다.

### 프로그램 구분

같은 IP를 사용하는 서버에서 통신하는 어플리케이션이 둘 이상이라면 어떻게 할것인가?
